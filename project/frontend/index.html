<!-- 
Business Accounting 
Small Business Accounting Solution
Copyright (C) 2014 Fuks Alexander
<mailto:kungfux2010@gmail.com>

This program is free software: you can redistribute it and/or modify
it under the terms of the GNU General Public License as published by
the Free Software Foundation, either version 3 of the License, or
(at your option) any later version.

This program is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU General Public License for more details.

You should have received a copy of the GNU General Public License
along with this program.  If not, see <http://www.gnu.org/licenses/>.
-->

<!DOCTYPE html>
<html>
	<head>
		<title>Business Accounting</title>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
		<meta http-equiv="X-UA-Compatible" content="IE=9" >
		<link rel="shortcut icon" href="favicon.ico">
		<link id="stylesheet" rel="stylesheet" href="themes/redmond/jquery-ui.css">
		<link rel="stylesheet" href="style.css">
		<script src="jquery.js" type="text/javascript"></script>
		<script src="jquery-ui.js" type="text/javascript"></script>
		<script>
		// return value of url parameter
		function getUrlParameter(pParameterName) {
    		var url = window.location.search.substring(1);
    		var urlParams = url.split('&');
    		for (var i = 0; i < urlParams.length; i++) {
        		var pParamName = urlParams[i].split('=');
        		if (pParamName[0] == pParameterName) {
            		return pParamName[1];
        		}
    		}
		} // end getUrlParameter()

		// default params
		var lang = "en-US";
		var theme = "redmond";
		var reverse = false;
		// read url parameters
		lang = getUrlParameter('lang');
		theme = getUrlParameter('theme');
		reverse = getUrlParameter('reverse');

		// apply theme
		$("#stylesheet").attr({href : "themes/" + theme + "/jquery-ui.css"});

		// reverse background color and text
		function reverseBackground() {
			reverse = reverse == "True" || reverse == "true";
			if (reverse) {
				// reverse body background and text
				$("body").css({"background-color" : "rgb(51,51,51)"});
				$("p").css({"color" : "rgb(194,201,201)"});
				// reverse menu background and text
				$("#menu").css({"background" : "rgb(51,51,51)"});
				$("#menu li a").css({"color" : "rgb(255,255,255)"});
			}
		} // end reverseBackground

		// translate the page
		function translate() {
			$.getJSON(lang + ".json", function(json) {
				// translate objects
				// main menu translation
				$("#menuCash").text(json.menuCash);
				$("#menuEmployees").text(json.menuEmployees);
				$("#menuCharts").text(json.menuCharts);
				$("#menuReports").text(json.menuReports);
				$("#menuHelp").text(json.menuHelp);
				// change these lines on each page
				$("#lang").text(lang);
				$("#theme").text(theme);
				$("#test").text(json.test);
			});
		} // end translate()

		// jQueryUI datepicker init & translation
		jQuery(function($){
			$.getJSON(lang + ".json", function(json) {
				$.datepicker.regional[lang] = {
					closeText: json.dtClose,
					prevText: json.dtPrev,
					nextText: json.dtNext,
					currentText: json.dtToday,
					monthNames: json.dtMonth,
					monthNamesShort: json.dtMonthShort,
					dayNames: json.dtDay,
					dayNamesShort: json.dtDayShort,
					dayNamesMin: json.dtDayMin,
					weekHeader: json.WeekMin,
					dateFormat: json.dtFormat,
					firstDay: json.dtFirstDay,
					isRTL: false,
					showMonthAfterYear: false,
					yearSuffix: ''};
				$.datepicker.setDefaults($.datepicker.regional[lang]);
			});
		}); // end jQueryUI

		$(document).ready(function(){
			reverseBackground();
			translate();
            $("#datepicker").datepicker($.datepicker.regional[lang]);
		});
		</script>
	</head>
	<body>
		<div id="page">
			<div id='menu'>
				<ul>
				   <li class='active'><a href='#'><span id="menuCash">Cash</span></a></li>
				   <li><a href='#'><span id="menuEmployees">Employees</span></a></li>
				   <li><a href='#'><span id="menuCharts">Charts</span></a></li>
				   <li><a href='#'><span id="menuReports">Reports</span></a></li>
				   <li><a href='#'><span id="menuHelp">Help</span></a></li>
				</ul>
			</div>
			<div id="content">
				<div class="ui-widget">
					<p>Passed language from app: <span id="lang"></span></p>
					<p>Passed theme from app: <span id="theme"></span></p>
					<p>Loaded text string from JSON: <span id="test"></span></p>
				</div>
				<input id="datepicker" type="text">
			</div>
		</div>
	</body>
</html>